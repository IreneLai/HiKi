{% load static %}
{% load sort %}
<!DOCTYPE html>

<head>
    <meta charset="UTF-8">
    <title>Tally Display</title>
    <!-- css -->
    {% include 'include/bootstrap.html' %}
    <link rel="stylesheet" type="text/css" href="{% static 'main.css' %}">
    <style>
	header {
		max-width:960px;
		margin:0 auto;
	}

    main {
    	max-width: 960px;
    	margin: 0 auto;
    }

    .block {
    	width:90%;
    	min-height: 25%;
        background-color: #FFF;
        border-radius: 5px;
        margin-top: 0.5em;
        border: solid rgba(10, 186, 181, 0.6);
        border-width: 3px;
        padding: 1rem;
        margin: 1rem;
    }

    .block div {
    	font-size: 1.3rem;
    }
	
	.item-row {
		border-left:rgba(10, 186, 181, 0.6) 3px dashed;
	}
	
	.item:hover {
    	cursor:pointer; 
    }

    </style>
    <script>
    //跳轉日記
    $(function() {
        $(".item").click(function() {
            window.location = $(this).find("a").attr("href");
            return false;
        });
    });
    </script>
</head>
{% include 'include/nav.html' with name=user.name title='tally_' %}
<body>
    <header class="h3 p-3">帳本列表<hr></header>
    <main class="d-flex flex-column" >
        <!-- 以日期為分類將同一天的帳目列在一起 -->
        {% with tallyList|datelist as dates %}
		{% for d in dates %}
		<div class="block d-flex align-items-center">
			<!-- 顯示日期 -->
			<span class="h4 pr-3">{{d|date:"Y/m/d"}}</span>
			<!-- 顯示當天花費項目 -->
			<div class="item-row d-flex flex-wrap">
			{% for l in tallyList|get_tally:d %}
				<div class="item d-flex m-2">
					<a href="{% url 'tally_detail' pk=l.pk %}"></a>
					{% if l.pay_type == '收入' %}
					<img width="40" height="40" src="{% static 'icon/detail/income.png' %}" class="m-1">
					{% endif %}
					{% if l.pay_type == '支出' %}
					<img width="40" height="40" src="{% static 'icon/detail/expense.png' %}" class="m-1">
					{% endif %}
					<div class="d-flex flex-column flex-sm-row p-1">
						<span>{{ l.type }}</span>
						<span>${{ l.price }}</span>
					</div>
				</div>
			{% endfor %}
			</div>
		</div>
		{% endfor %}
        {% endwith %}
	</main>
</body>

</html>
