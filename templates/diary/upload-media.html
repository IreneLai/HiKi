{% load static %}
<!DOCTYPE html>
</html>
	<head>
    	<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
    	<title>Media Uploader</title>
    	<!-- css -->
		<link rel="stylesheet" href="{% static 'main.css' %}">
		{% include 'include/bootstrap.html' %}
		<style>
		.custom-file-control:before{
			content: "瀏覽";
			background-color: #0ABAB5;
			color:white;
		}
		</style>
		<!-- js -->
		<script src="{% static 'js/no-prevpage.js' %}"></script>
		<script src="{% static 'js/textarea.js' %}"></script>
	</head>
	<body class="d-flex flex-column">
		{% include 'users/nav.html' with name="Media Uploader" %}
		<main class="d-flex flex-column" style="width: 90%;margin: 0vh 5%;">
		    <div class="d-flex p-2">
			    <form action="" method="post" enctype="multipart/form-data" class="d-flex flex-column w-100">{% csrf_token %}
			        <!-- 上傳檔案 -->
			        <div class="d-flex align-items-center p-1">
			        	<img class="form-icon mr-1" src="{%static '/icon/form/file.png' %}">
			        	<label class="custom-file w-100" style="display: inline-block;">
			        		{{ media_form.img}}
			        		<div class="custom-file-control form-control-file" style="overflow:hidden;">添加檔案...
			        		</div>
						</label>
			        	<input type="hidden" name="diaryID" value={{diaryID}} />
			        </div>
			        <!-- 檔案標題 -->
			        <div class="d-flex p-1">
		        		<img class="form-icon mr-1" src="{%static '/icon/form/picture.png' %}">
		        		{{ media_form.title }}
		        	</div>
		        	<!-- 檔案敘述 -->
		        	<div class="d-flex p-1">
		        		<img class="form-icon mr-1" src="{%static '/icon/form/alt.png' %}">
		        		{{ media_form.description}}
		        	</div>
		        	<div class="d-flex m-1 align-self-center">
		        		<input class="btn custom-button" type="submit" value="加入媒體" name="option1"/>
		        	</div>
			    </form>
		    </div>
			<div class="d-flex flex-column p-2">
		    	<iframe id="frame" class="form-control" src="/diary/media-upload-show/" scrolling="no">
		    		{% include 'diary/upload-media-display.html' %}
		    	</iframe>
		    </div>
		    <div class="d-flex align-self-center">
		    	<a class="btn custom-button" href="{% url 'detail' pk=diaryID %}">確認</a>
		    </div>
		</main>
		<script>
			//改變上傳檔案欄位
			$('.custom-file-input').on('change',function(){
		    	var fileName = $(this).val().split('/').pop().split('\\').pop();
		    	$(this).next('.custom-file-control').html(fileName);
			})
		</script>
	</body>
</html>
